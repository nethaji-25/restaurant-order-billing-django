<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Restaurant Table Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-8">

<h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">
    üçΩÔ∏è Restaurant Table Dashboard
</h2>

<div class="overflow-x-auto">
    <table class="w-full bg-white shadow-lg rounded-lg overflow-hidden">
        <thead class="bg-gray-200">
            <tr>
                <th class="px-6 py-3 text-left text-gray-700">Table</th>
                <th class="px-6 py-3 text-left text-gray-700">Status</th>
                <th class="px-6 py-3 text-left text-gray-700">Action</th>
            </tr>
        </thead>
        <tbody>

        {% for row in table_data %}
            {% with table=row.table order=row.latest_order %}
            <tr class="border-t">

                <!-- TABLE NUMBER -->
                <td class="px-6 py-4 font-medium text-gray-800">
                    Table {{ table.table_number }}
                </td>

                <!-- STATUS BADGE -->
                <td class="px-6 py-4">
                    <span class="
                        px-3 py-1 rounded-full text-sm font-semibold
                        {% if table.status == 'AVAILABLE' %}
                            bg-green-100 text-green-700
                        {% elif table.status == 'OCCUPIED' %}
                            bg-yellow-100 text-yellow-700
                        {% elif table.status == 'BILL_REQUESTED' %}
                            bg-blue-100 text-blue-700
                        {% else %}
                            bg-red-100 text-red-700
                        {% endif %}
                    ">
                        {{ table.status }}
                    </span>
                </td>

                <!-- ACTION BUTTON -->
                <td class="px-6 py-4">

                    {% if table.status == 'AVAILABLE' %}
                        <a href="{% url 'create_order' table.id %}"
                           class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-semibold transition">
                            Create Order
                        </a>

                    {% elif table.status == 'OCCUPIED' and order %}
                        <a href="{% url 'add_order_items' order.id %}"
                           class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-md text-sm font-semibold transition">
                            Order in Progress
                        </a>

                    {% elif table.status == 'BILL_REQUESTED' and order %}
                        <a href="{% url 'generate_bill' order.id %}"
                           class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-semibold transition">
                            View Bill
                        </a>

                    {% elif table.status == 'CLOSED' %}
                        <span class="text-red-600 font-medium">
                            Closed
                        </span>

                    {% endif %}

                </td>
            </tr>
            {% endwith %}
        {% endfor %}

        </tbody>
    </table>
</div>

</body>
</html>
